---
import ThemeToggle from "./ThemeToggle.astro";
import Icon from "./Icon.astro";
---

<header
	class="fixed top-0 left-0 right-0 z-50 w-full border-b border-border bg-surface/90 backdrop-blur-md dark:border-border dark:bg-surface/90 transition-colors duration-200"
>
	<div class="mx-auto flex h-16 max-w-7xl items-center justify-between px-4 sm:px-6 lg:px-8">
		<div class="flex items-center">
			<a href="/" class="flex items-center space-x-2">
				<img src="/logo.svg" alt="API Calls Logo" class="h-8 w-auto" />
				<span class="text-xl font-bold text-text">API Calls</span>
			</a>
		</div>

		<nav class="hidden md:flex items-center space-x-8">
			<a href="/features" class="text-sm font-medium text-text hover:text-primary transition-colors"
				>Features</a
			>
			<a href="/doc" class="text-sm font-medium text-text hover:text-primary transition-colors"
				>Docs</a
			>
			<a
				href="https://github.com/elpeix/apicalls"
				target="_blank"
				rel="noopener noreferrer"
				class="text-sm font-medium text-text hover:text-primary transition-colors">GitHub</a
			>
		</nav>

		<div class="flex items-center gap-4">
			<div class="hidden md:block">
				<ThemeToggle />
			</div>
			<a
				href="https://github.com/elpeix/apicalls/releases/latest"
				target="_blank"
				rel="noopener noreferrer"
				class="rounded-lg bg-primary px-4 py-2 text-sm font-semibold text-white shadow-sm hover:opacity-90 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary transition-opacity"
			>
				Download
			</a>
			<!-- Mobile menu button -->
			<div class="md:hidden flex items-center">
				<button id="mobile-menu-button" class="p-2 text-text focus:outline-none" aria-label="Menu">
					<Icon name="menu" class="h-6 w-6 block" id="menu-icon" />
					<Icon name="close" class="h-6 w-6 hidden" id="close-icon" />
				</button>
			</div>
		</div>
	</div>

	<!-- Mobile Menu -->
	<div id="mobile-menu" class="hidden md:hidden border-t border-border bg-surface">
		<nav class="flex flex-col space-y-4 px-4 py-6">
			<a
				href="/features"
				class="text-base font-medium text-text hover:text-primary transition-colors">Features</a
			>
			<a href="/doc" class="text-base font-medium text-text hover:text-primary transition-colors"
				>Docs</a
			>
			<a
				href="https://github.com/elpeix/apicalls"
				target="_blank"
				rel="noopener noreferrer"
				class="text-base font-medium text-text hover:text-primary transition-colors">GitHub</a
			>
		</nav>
	</div>
</header>

<script>
	function initMobileMenu() {
		const btn = document.getElementById("mobile-menu-button");
		const menu = document.getElementById("mobile-menu");
		const menuIcon = document.getElementById("menu-icon");
		const closeIcon = document.getElementById("close-icon");

		if (btn && menu) {
			btn.onclick = () => {
				menu.classList.toggle("hidden");
				if (menuIcon) {
					menuIcon.classList.toggle("hidden");
					menuIcon.classList.toggle("block");
				}
				if (closeIcon) {
					closeIcon.classList.toggle("hidden");
					closeIcon.classList.toggle("block");
				}
			};
		}
	}

	initMobileMenu();
	document.addEventListener("astro:page-load", initMobileMenu);
</script>
